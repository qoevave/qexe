"use strict";(self.webpackChunkqexe_website=self.webpackChunkqexe_website||[]).push([[9830],{4873:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>l,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var a=s(4848),o=s(8453);const r={sidebar_position:6,custom_edit_url:null},t="Analysis",i={id:"r-analysis",title:"Analysis",description:"'R'eady to go...",source:"@site/docs/r-analysis.mdx",sourceDirName:".",slug:"/r-analysis",permalink:"/qexe/docs/r-analysis",draft:!1,unlisted:!1,editUrl:null,tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6,custom_edit_url:null},sidebar:"tutorialSidebar",previous:{title:"Example Test",permalink:"/qexe/docs/example-test"},next:{title:"Publications",permalink:"/qexe/docs/publications"}},d={},c=[{value:"&#39;R&#39;eady to go...",id:"ready-to-go",level:2},{value:"Loading a Results File",id:"loading-a-results-file",level:3},{value:"Loading a Questionnaire file",id:"loading-a-questionnaire-file",level:3},{value:"Load a Behavior Tracking File",id:"load-a-behavior-tracking-file",level:3}];function _(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"analysis",children:"Analysis"}),"\n",(0,a.jsx)(n.h2,{id:"ready-to-go",children:"'R'eady to go..."}),"\n",(0,a.jsx)(n.p,{children:"To analyze the data ouput of the QExE tool, we've provided some R code for some data exploration."}),"\n",(0,a.jsx)(n.h3,{id:"loading-a-results-file",children:"Loading a Results File"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-r",children:'library(jsonlite)\nlibrary(tidyverse)\n\nresults_js <- fromJSON("subj_id_unknown_1809/results_id_unknown_1809.json", flatten = TRUE) # Load the JSON results file\ndf <- as.data.frame(results_js$ResultsFile$TestResults) # Select the JSON nest with the results\n\ndf_long <- df %>%\n  pivot_longer(\n    cols = starts_with("Rating.Con_"),  # Select columns that start with \'Rating.Con_\'\n    names_to = "Condition",             # Name of the new key column\n    values_to = "Rating"                # Name of the new value column\n  )\n\ndf_long <- df_long %>%\n  mutate(Condition = str_replace(Condition, "Rating.Con_", "")) # Remove flattened JSON names\n\ndf_long <- df_long %>% # Revalue the column vectors to factors or numeric\n  mutate(\n    SceneID = as.factor(SceneID),\n    UnitySceneID = as.factor(UnitySceneID),\n    VideoFile = as.factor(VideoFile),\n    VideoID = as.factor(VideoID),\n    Condition = as.factor(Condition),\n    Rating = as.numeric(Rating)\n  )\n\ndf_long$SubjectID <- 1 # Add a subject ID\n'})}),"\n",(0,a.jsx)(n.h3,{id:"loading-a-questionnaire-file",children:"Loading a Questionnaire file"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-r",children:'library(jsonlite)\nlibrary(tidyverse)\n\nquestionnaire_js <- fromJSON("subj_id_unknown_1809/questionnaire_id_unknown_1809.json", flatten = TRUE)\nquestionnaire_df <- as.data.frame(questionnaire_js$QuestionnaireFile$QuestionnaireResults)\n\ndf_long <- questionnaire_df %>%\n  pivot_longer(\n    cols = starts_with("Rating."), \n    names_to = "NASATLX",             \n    values_to = "Rating"            \n  )\n\ndf_long <- df_long %>%\n  mutate(NASATLX = str_replace(NASATLX, "Rating.", ""))\n\ndf_long <- df_long %>%\n  mutate(\n    SceneID = as.factor(SceneID),\n    UnitySceneID = as.factor(UnitySceneID),\n    VideoFile = as.factor(VideoFile),\n    VideoID = as.factor(VideoID),\n    NASATLX = as.factor(NASATLX),\n    Rating = as.numeric(Rating)\n  )\n\ndf_long$SubjectID <- 1\n'})}),"\n",(0,a.jsx)(n.h3,{id:"load-a-behavior-tracking-file",children:"Load a Behavior Tracking File"}),"\n",(0,a.jsx)(n.p,{children:"The behavior file contains a lot of data that you can parse into different dataframes for analysis. Here's an example loading the .txt file and parsing the user and object transform data into separate df's."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-r",children:'library(dplyr)\nlibrary()\n\ndf_this_subject_behavior = read.table("subj_id_unknown_1809/behaviour_id_unknown_1809.txt", header = FALSE, sep = " ", dec = ".", fill = TRUE)\ndf_this_subject_behavior <- dplyr::select(df_this_subject_behavior, V1, V2, V4, V5, V9, V12, V15, V18, V21, V24)\n  \n# df_this_subject_behavior$SubjID <- c(gsub(".txt","",subjectFilesInFolder[9]))\n\n# Extract user-transform messages into new df\ndf_behavior_userPose <- dplyr::filter(df_this_subject_behavior, \n                                      V5 == "<OSCMessage:/stream/userpose/rot>" \n                                      | V5 == "<OSCMessage:/stream/userpose/pos>")\n\n# Extract object-transform messages into new df\ndf_behavior_objects <- dplyr::filter(df_this_subject_behavior, \n                                     V5 == "<OSCMessage:/stream/objectspose/pos/>" \n                                     | V5 == "<OSCMessage:/stream/objectspose/rot/>" )\n\n# Rename the column vectors. \ncolnames(df_behavior_userPose) <- c("Scene", "TimeElapsed", "Video", "OSCMessage", "X", "Y", "Z")\ncolnames(df_behavior_objects) <- c("Scene", "TimeElapsed", "Video", "OSCMessage", "ObjectIndex", "X", "Y", "Z")\n\n# User behavior\n# Remove characters from numeric variable entries \ndf_behavior_userPose$X <- gsub(",", ".", as.character(df_behavior_userPose$X))\ndf_behavior_userPose$X = substring(df_behavior_userPose$X,1, nchar(df_behavior_userPose$X)-1)\ndf_behavior_userPose$Y <- gsub(",", ".", as.character(df_behavior_userPose$Y))\ndf_behavior_userPose$Y = substring(df_behavior_userPose$Y,1, nchar(df_behavior_userPose$Y)-1)\ndf_behavior_userPose$Z <- gsub(",", ".", as.character(df_behavior_userPose$Z))\ndf_behavior_userPose$Z <- gsub(")", "", as.character(df_behavior_userPose$Z))\ndf_behavior_userPose$TimeElapsed <- gsub(",", ".", as.character(df_behavior_userPose$TimeElapsed))\n\n# Convert vectors to factors and numeric values\ndf_behavior_userPose$Scene <- as.factor(df_behavior_userPose$Scene)\ndf_behavior_userPose$TimeElapsed <- as.numeric(df_behavior_userPose$TimeElapsed)\ndf_behavior_userPose$X <- as.numeric(df_behavior_userPose$X)\ndf_behavior_userPose$Y <- as.numeric(df_behavior_userPose$Y)\ndf_behavior_userPose$Z <- as.numeric(df_behavior_userPose$Z)\n\n# Remove obsolete columns\ndf_behavior_userPose <- df_behavior_userPose[,c(1,2,3,4,5,6,7)]\n\n# Objects\n# Remove characters from numeric variable entries \ndf_behavior_objects$X <- gsub(",", ".", as.character(df_behavior_objects$X))\ndf_behavior_objects$X = substring(df_behavior_objects$X,1, nchar(df_behavior_objects$X)-1)\ndf_behavior_objects$Y <- gsub(",", ".", as.character(df_behavior_objects$Y))\ndf_behavior_objects$Y = substring(df_behavior_objects$Y,1, nchar(df_behavior_objects$Y)-1)\ndf_behavior_objects$Z <- gsub(",", ".", as.character(df_behavior_objects$Z))\ndf_behavior_objects$Z = substring(df_behavior_objects$Z,1, nchar(df_behavior_objects$Z)-1)\ndf_behavior_objects$TimeElapsed <- gsub(",", ".", as.character(df_behavior_objects$TimeElapsed))\ndf_behavior_objects$ObjectIndex <- gsub(",", "", as.character(df_behavior_objects$ObjectIndex))\n\ndf_behavior_objects$Scene <- as.factor(df_behavior_objects$Scene)\ndf_behavior_objects$TimeElapsed <- as.numeric(df_behavior_objects$TimeElapsed)\ndf_behavior_objects$ObjectIndex <- as.numeric(df_behavior_objects$ObjectIndex)\ndf_behavior_objects$X <- as.numeric(df_behavior_objects$X)\ndf_behavior_objects$Y <- as.numeric(df_behavior_objects$Y)\ndf_behavior_objects$Z <- as.numeric(df_behavior_objects$Z)\n\n# Remove obsolete columns\ndf_behavior_objects <- df_behavior_objects[,c(1,2,3,4,5,6,7,8)]\n\ndf_behavior_userPose$SubjectID <- 1\ndf_behavior_objects$SubjectID <- 1\n'})})]})}function l(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(_,{...e})}):_(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>i});var a=s(6540);const o={},r=a.createContext(o);function t(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);